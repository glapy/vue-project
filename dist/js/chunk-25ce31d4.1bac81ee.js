(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25ce31d4"],{"572c":function(t,e,n){},"80a7":function(t,e,n){"use strict";n("572c")},"8c6e":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shoppingCart"},[n("el-button",{staticClass:"operation",attrs:{size:"mini"},on:{click:t.handleSetCartItems}},[t._v("清空购物车")]),n("el-button",{staticClass:"operation",attrs:{size:"mini"},on:{click:t.handleDeleteCartItem}},[t._v("删除")]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.commodities,stripe:"","max-height":"1000px"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"50"}}),n("el-table-column",{attrs:{prop:"name",label:"商品名称",width:"180"}}),n("el-table-column",{attrs:{prop:"shopName",label:"店铺",width:"180"}}),n("el-table-column",{attrs:{prop:"price",label:"单价",formatter:t.formatterPrice,width:"180"}}),n("el-table-column",{attrs:{prop:"quantity",label:"数量",width:"130"}}),n("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.handleSubtract(e.row)}}},[t._v("-")]),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.handleAdd(e.row)}}},[t._v("+")])]}}])}),n("el-table-column",{attrs:{prop:"amount",label:"金额",formatter:t.formatterAmount,width:"180"}})],1),n("p",[n("span",[n("button",{staticClass:"checkout",on:{click:t.checkout}},[t._v("结算")])]),n("span",[t._v("总价："+t._s(t._f("currency")(t.cartTotalPrice)))])])],1)},i=[],r=(n("8e6e"),n("ac6a"),n("456d"),n("ade3")),c=n("2f62");function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u={name:"ShoppingCart",created:function(){var t=this;this.axios.get("/shoppingCart/"+this.user.id,{params:{page:1}}).then((function(e){200==e.status&&t.getItems(e.data.data.records)}))},computed:s(s({},Object(c["e"])("cart",{commodities:"items"})),Object(c["e"])("user",["user"])),data:function(){return{cartTotalPrice:0,selectCartItems:[]}},methods:s(s({formatterAmount:function(t){return(t.quantity*t.price*t.discount).toFixed(2)},formatterPrice:function(t){return t.discount*t.price}},Object(c["d"])("cart",["getItems","reduceItemQuantity","deleteCartItem","incrementItemQuantity","setCartItems","getPayItems"])),{},{handleSubtract:function(t){var e=this,n=t.quantity-1;n<=0?this.$confirm("您确定要删除商品吗？").then((function(){e.axios.post("shoppingCart/delete",[t]).then((function(n){0==n.data.code&&e.deleteCartItem([t])})).catch((function(){}))})).catch((function(){})):(this.reduceItemQuantity({id:t.id,quantity:1}),this.updateShoppingCartItem(t))},handleAdd:function(t){this.incrementItemQuantity({id:t.id,quantity:1}),this.updateShoppingCartItem(t)},updateShoppingCartItem:function(t){this.axios.post("shoppingCart/update",t)},handleSelectionChange:function(t){this.selectCartItems=t,this.cartTotalPrice=t.reduce((function(t,e){return t+e.price*e.discount*e.quantity}),0).toFixed(2)},handleDeleteCartItem:function(){var t=this;0==this.selectCartItems.length?this.$message("请先选择要删除商品！"):this.axios.post("shoppingCart/delete",this.selectCartItems).then((function(e){0==e.data.code&&t.deleteCartItem(t.selectCartItems)})).catch((function(){}))},handleSetCartItems:function(){var t=this;this.$confirm("确定要清空购物车吗？").then((function(){t.axios.post("shoppingCart/delete",t.commodities).then((function(e){0==e.data.code&&t.setCartItems()})).catch((function(){}))})).catch((function(){}))},checkout:function(){0!=this.selectCartItems?(this.getPayItems(this.selectCartItems),this.$router.push("/check")):this.$message("请先选择商品！")}})},l=u,h=(n("80a7"),n("2877")),p=Object(h["a"])(l,a,i,!1,null,"1e19e097",null);e["default"]=p.exports}}]);